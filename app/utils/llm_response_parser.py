import json

def extract_json_from_llm_response(llm_response):
    """
    Extracts and converts a JSON-like response from an LLM into a valid JSON object.

    :param llm_response: A string with the JSON wrapped in backticks.
    :return: Parsed JSON object (dictionary)
    """
    # if not isinstance(llm_response, list) or not llm_response:
    #     raise ValueError("Invalid response format. Expected a list with a JSON string.")

    raw_json_string = llm_response

    # Remove backticks and "json" keyword if present
    cleaned_json_string = raw_json_string.replace("```json", "").replace("```", "").strip()

    try:
        parsed_json = json.loads(cleaned_json_string)
        return parsed_json
    except json.JSONDecodeError as e:
        raise ValueError(f"Failed to parse JSON: {e}")

test = """
    ```json { "worklets": [ { "Title": "AI-Powered Voice Assistant for Emotional Understanding", "Problem Statement": "Current voice assistants lack empathy and struggle to understand emotional nuances in user requests.", "Goal": "Develop an AI-powered voice assistant capable of detecting and responding to user emotions with empathy.", "Expectations": "Implement real-time emotion detection, personalized responses, and improve user satisfaction metrics by 20%.", "Training/Prerequisite": "NLP, affective computing, and Python programming", "Difficulty": 7, "Reference Work": [ { "title": "Emotion Recognition in Speech", "link": "https://www.researchgate.net/publication/example" }, { "title": "Affective Computing Basics", "link": "https://affectivecomputing.mit.edu/" } ] }, { "Title": "AI-Driven Personalized Mental Health Interventions", "Problem Statement": "Mental health interventions often lack personalization, reducing their effectiveness.", "Goal": "Create an AI system that analyzes user behavior and provides personalized mental health recommendations.", "Expectations": "Develop a model that predicts stress/anxiety triggers and offers tailored coping strategies, achieving 85% accuracy.", "Training/Prerequisite": "Psychology fundamentals, machine learning, data analysis", "Difficulty": 8, "Reference Work": [ { "title": "Personalized Mental Health AI Models", "link": "https://www.nature.com/articles/example" }, { "title": "Mental Health Data Analysis Techniques", "link": "https://example.org/mental-health-analytics" } ] }, { "Title": "Automated Wildlife Conservation Monitoring System", "Problem Statement": "Manual wildlife monitoring is time-consuming and prone to human error.", "Goal": "Develop an automated system using drones and AI for real-time wildlife conservation monitoring.", "Expectations": "Achieve 90% accuracy in species identification and reduce illegal poaching by 15%.", "Training/Prerequisite": "Computer vision, drone operations, ecology basics", "Difficulty": 6, "Reference Work": [ { "title": "AI for Wildlife Conservation", "link": "https://www.wildlife.org/ai-conservation" }, { "title": "Drone-Based Monitoring Systems", "link": "https://example.com/drone-wildlife" } ] }, { "Title": "Augmented Reality for Gamified Fitness", "Problem Statement": "Traditional fitness routines often lack engagement, leading to low adherence rates.", "Goal": "Create an AR-based fitness app that gamifies workouts, increasing user engagement and motivation.", "Expectations": "Increase user retention by 30% through interactive challenges and real-time feedback.", "Training/Prerequisite": "AR development, game design, fitness coaching", "Difficulty": 5, "Reference Work": [ { "title": "Gamification in Fitness Apps", "link": "https://example.net/fitness-gamification" }, { "title": "Augmented Reality Development Basics", "link": "https://developer.example/ar-guide" } ] }, { "Title": "Explainable AI for Healthcare Transparency", "Problem Statement": "AI models in healthcare often lack transparency, reducing trust among medical professionals.", "Goal": "Develop an explainable AI system that provides clear insights into its decision-making process for medical diagnoses.", "Expectations": "Achieve 90% model interpretability and improve doctor trust in AI recommendations by 25%."), "Training/Prerequisite": "Explainable AI, healthcare data analysis, Python programming", "Difficulty": 8, "Reference Work": [ { "title": "Explainable AI in Healthcare", "link": "https://example.org/xai-healthcare" }, { "title": "Interpretable Machine Learning Models", "link": "https://www.ml-interpreter.com/example" } ] } ] } ```
"""

# print(extract_json_from_llm_response(test))
# Example usage
# llm_response = ["```json\n{\n    \"worklets\": [\n        {\n            \"Problem Statement\": \"Existing object detection models often struggle with identifying objects in low-light or obscured conditions, leading to inaccurate or missed detections.\",\n            \"Goal\": \"Develop an object detection model robust to low-light and obscured conditions to improve detection accuracy in challenging environments.\",\n            \"Expectations\": \"Participants will research and implement image enhancement techniques, train an object detection model with augmented data (simulating low-light/obscured conditions), and evaluate its performance against a baseline model.\",\n            \"Training/Prerequisite\": \"Proficiency in Python, experience with deep learning frameworks (e.g., TensorFlow, PyTorch), familiarity with object detection algorithms (e.g., YOLO, SSD), and basic knowledge of image processing techniques.\"\n        },\n        {\n            \"Problem Statement\": \"Current machine learning models often lack interpretability, making it difficult to understand their decision-making process and build trust in their predictions.\",\n            \"Goal\": \"Enhance the interpretability of a pre-trained machine learning model used in a specific application domain.\",\n            \"Expectations\": \"Participants will apply various interpretability techniques (e.g., LIME, SHAP) to a given model, visualize and analyze the results, and document the key factors influencing the model's predictions.\",\n            \"Training/Prerequisite\": \"Experience with machine learning model development, understanding of model evaluation metrics, and familiarity with interpretability libraries and techniques.\"\n        },\n        {\n            \"Problem Statement\": \"Many applications require real-time processing of data on resource-constrained devices, which poses challenges for deploying computationally intensive machine learning models.\",\n            \"Goal\": \"Optimize a pre-trained machine learning model for deployment on a mobile device or embedded system.\",\n            \"Expectations\": \"Participants will apply model compression techniques (e.g., quantization, pruning) to reduce the model size and computational complexity, while minimizing the impact on accuracy. They will then deploy the optimized model on a target device and evaluate its performance.\",\n            \"Training/Prerequisite\": \"Experience with machine learning model deployment, understanding of model compression techniques, and familiarity with mobile development platforms or embedded systems programming.\"\n        },\n        {\n            \"Problem Statement\": \"The performance of machine learning models can be significantly affected by biases present in the training data, leading to unfair or discriminatory outcomes.\",\n            \"Goal\": \"Identify and mitigate bias in a dataset and a machine learning model used for a specific prediction task.\",\n            \"Expectations\": \"Participants will analyze a dataset for potential sources of bias, apply techniques to mitigate bias (e.g., data re-sampling, adversarial debiasing), and evaluate the impact on model fairness metrics.\",\n            \"Training/Prerequisite\": \"Understanding of data bias and fairness metrics, experience with data analysis and manipulation, and familiarity with machine learning model evaluation.\"\n        },\n        {\n            \"Problem Statement\": \"Traditional machine learning models often require large amounts of labeled data, which can be expensive and time-consuming to acquire.\",\n            \"Goal\": \"Develop a semi-supervised learning model that can leverage both labeled and unlabeled data to improve performance with limited labeled data.\",\n            \"Expectations\": \"Participants will implement a semi-supervised learning algorithm (e.g., self-training, label propagation), train the model with a combination of labeled and unlabeled data, and compare its performance to a supervised learning baseline trained on only labeled data.\",\n            \"Training/Prerequisite\": \"Experience with supervised learning algorithms, understanding of semi-supervised learning principles, and familiarity with data augmentation techniques.\"\n        }\n    ]\n}\n```"]
# parsed_json = extract_json_from_llm_response(llm_response)
# print(llm_response)
# print(parsed_json)

# T_TEST = """
# ```json { "worklets": [ { "Title": "AI-Driven Interpretability Tools for Healthcare", "Problem Statement": "Lack of transparency in AI models hinders trust in medical diagnoses.", "Goal": "Develop tools to make AI decisions transparent for healthcare professionals.", "Expectations": "Design user-friendly software for model interpretability and validate with real datasets.", "Training/Prerequisite": "Python, TensorFlow, healthcare data understanding", "Difficulty": 8, "Reference Work": [ { "title": "AI in Healthcare", "link": "https://www.nature.com/articles/s41746-021-00444-7" }, { "title": "Interpretability Techniques", "link": "https://arxiv.org/abs/2004.10044" } ] }, { "Title": "Blockchain for Supply Chain Transparency", "Problem Statement": "Supply chains lack transparency, leading to inefficiencies and fraud.", "Goal": "Implement a blockchain system to track supply chain activities securely.", "Expectations": "Develop a prototype ensuring data integrity and traceability across nodes.", "Training/Prerequisite": "Blockchain basics, Node.js", "Difficulty": 7, "Reference Work": [ { "title": "Supply Chain Blockchain", "link": "https://www.researchgate.net/publication/320943345" }, { "title": "Hyperledger Fabric Tutorial", "link": "https://hyperledger-fabric.readthedocs.io/en/latest/" } ] }, { "Title": "Wind Energy Prediction with ML", "Problem Statement": "Inaccuracies in wind power prediction affect energy distribution.", "Goal": "Enhance wind energy forecasting using machine learning models.", "Expectations": "Develop models that improve prediction accuracy and reduce errors.", "Training/Prerequisite": "Python, scikit-learn, pandas", "Difficulty": 6, "Reference Work": [ { "title": "Wind Power Prediction", "link": "https://ieeexplore.ieee.org/document/9039658" }, { "title": "Time Series Analysis", "link": "https://www.coursera.org/learn/time-series-analysis" } ] }, { "Title": "NLP for Mental Health on Social Media", "Problem Statement": "Early detection of mental health issues is crucial for timely intervention.", "Goal": "Create NLP tools to identify signs of distress in social media texts.", "Expectations": "Build models that analyze text data accurately and ethically.", "Training/Prerequisite": "NLP, Python, ethics awareness", "Difficulty": 9, "Reference Work": [ { "title": "Mental Health NLP", "link": "https://dl.acm.org/doi/10.1145/3357376" }, { "title": "TextBlob Tutorial", "link": "https://textblob.readthedocs.io/en/dev/" } ] }, { "Title": "Smart Wearables for Health Monitoring", "Problem Statement": "Continuous health monitoring is needed for proactive care.", "Goal": "Design wearables that monitor vital signs in real-time with AI integration.", "Expectations": "Develop a prototype with accurate data collection and analysis.", "Training/Prerequisite": "Arduino, IoT, machine learning", "Difficulty": 8, "Reference Work": [ { "title": "Wearable Health Tech", "link": "https://www.sciencedirect.com/science/article/pii/S2542528619300581" }, { "title": "Arduino Wearables Guide", "link": "https://www.arduino.cc/en/Main/Guide" } ] } ] } ```
# """
# print(extract_json_from_llm_response(T_TEST))
